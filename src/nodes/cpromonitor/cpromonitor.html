<script type="text/javascript">
	RED.nodes.registerType('monitor', {
		category: 'hooks',
		color: '#9e4d90',
		defaults: {
			name: { value: '' },
			ignore: { value: '' },
			mode: { value: 'off' },
			snapshotrecording: { value: 'all' },
		},
		// outputs: 1,
		icon: 'font-awesome/fa-exchange',
		label: function () {
			return this.name ? this.name : 'Monitor message flow';
		},
		oneditprepare: function () {
			$("#node-input-mode").typedInput({
				types: [
					{
						value: "off",
						options: [
							{ value: "off", label: "Disable" },
							{ value: "mongo_local", label: "Local MongoDB" },
							{ value: "mongo_cosmos", label: "Azure CosmosDB Mongo Cluster" },
							{ value: "mongo_cosmos_over_api", label: "Azure CosmosDB Mongo Cluster over API" },
						]
					}
				]
			})

			$("#node-input-snapshotrecording").typedInput({
				types: [
					{
						value: "all",
						options: [
							{ value: "all", label: "Record all snapshots" },
							{ value: "first_and_last", label: "Record snapshots for incoming and outgoing messages" },
						]
					}
				]
			})
		}
	});
</script>

<script type="text/html" data-template-name="monitor">
	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
		<input type="text" id="node-input-name" placeholder="Name" />
	</div>
	<div class="form-row">
		<label for="node-input-ignore"
			><i class="fa fa-commenting-o"></i> Node types to ignore</label
		>
		<input
			type="text"
			id="node-input-ignore"
			placeholder="Which nodes to ignore"
		/>
	</div>
  <div class="form-row">
		<label for="node-input-mode"
			><i class="fa fa-server"></i> Driver</label
		>
		<input
			type="text"
			id="node-input-mode"
			placeholder="Which logging driver to use"
		/>
	</div>
	<div class="form-row">
		<label for="node-input-snapshotrecording"
			><i class="fa fa-server"></i> Snapshot recording</label
		>
		<input
			type="text"
			id="node-input-snapshotrecording"
			placeholder="What snapshots to record"
		/>
	</div>

</script>

<script type="text/html" data-help-name="monitor">
	<p>
		This node aggregates all messages that are received by other nodes in your flows. It is useful
		for debugging or profiling how your flows are applying data transformations. The term 'monitor'
		refers to the lifecycle of a single message object.
	</p>
</div>
</script>